<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Freedom Browser Unblocked</title>
</head>
<body>
  <!-- Gradient Background -->
  <div class="gradient-bg"></div>
  
  <!-- Floating particles -->
  <div class="particles" id="particles"></div>
  
  <!-- Main Content -->
  <div class="content-wrapper">
    <h1>Freedom Browser Unblocked</h1>
    
    <div class="status-indicator">
      <div class="status-dot"></div>
      <span class="status-text">Service Active</span>
    </div>
    
    <h2>Please make sure your WiFi is turned on.</h2>
    <h2>Please wait, automatic unblocking in progress...</h2>
  </div>
  
  <script>
   function startRedirect() {
     if (navigator.onLine) {
       const urls = [
         "https://test-ip-api.github.io/",
         "https://mathhelp-drab.vercel.app/",
         "https://mathrevision.pages.dev/",
         "https://englishhelp.pages.dev/"
       ];
       
       const maxActive = 1;
       let urlQueue = [...urls];
       let activeIframes = new Set();
       let foundValidIP = false;
       
       function isValidIPv4(ip) {
         const parts = ip.split('.');
         return parts.length === 4 && parts.every(part => {
           const num = parseInt(part, 10);
           return !isNaN(num) && num >= 0 && num <= 255;
         });
       }
       
       function createIframe(url) {
         const iframe = document.createElement('iframe');
         iframe.style.visibility = 'hidden';
         iframe.style.width = '0';
         iframe.style.height = '0';
         iframe.src = url;
         document.body.appendChild(iframe);
         activeIframes.add(iframe);
         return iframe;
       }
       
       // Create initial iframes
       for (let i = 0; i < maxActive && urlQueue.length > 0; i++) {
         createIframe(urlQueue.shift());
       }
       
       window.addEventListener("message", (event) => {
         if (foundValidIP) return;
         
         if (event.data === "port" && event.ports.length > 0) {
           const port = event.ports[0];
           // Find the iframe that sent this message
           const iframe = [...activeIframes].find(i => i.contentWindow === event.source);
           
           if (iframe) {
             port.postMessage("request_ip");
             port.onmessage = (e) => {
               if (foundValidIP) return;
               
               const ip = e.data;
               if (isValidIPv4(ip)) {
                 foundValidIP = true;
                 
                 // Create a blob with the IP address and redirect the current page
                 const redirectContent = `
                   <!DOCTYPE html>
                   <html>
                   <head>
                     <title>Redirecting...</title>
                     <meta http-equiv="refresh" content="0;URL='http://${ip}/work/school/subject/maths'">
                   </head>
                   <body>
                     <p>Redirecting to unblocked content...</p>
                     <script>
                       window.location.href = "http://${ip}/work/school/subject/maths";
                     </script>
                   </body>
                   </html>
                 `;
                 
                 const blob = new Blob([redirectContent], { type: 'text/html' });
                 const blobUrl = URL.createObjectURL(blob);
                 
                 // Redirect the current page to the blob URL
                 window.location.href = blobUrl;
                 
                 // Clean up
                 activeIframes.forEach(i => i.remove());
                 activeIframes.clear();
               } else {
                 iframe.remove();
                 activeIframes.delete(iframe);
                 if (!foundValidIP && urlQueue.length > 0) {
                   createIframe(urlQueue.shift());
                 }
               }
             };
           }
         }
       });
     } else {
       alert("offline turn on wifi");
     }
   }

   // Automatically start the redirect process when the page loads
   window.addEventListener('load', startRedirect);
  </script>
</body>
</html>